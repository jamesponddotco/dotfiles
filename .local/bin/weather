#!/usr/bin/env bash
#
# Script Name: Weather
# Script URL: https://git.sr.ht/~jamesponddotco/dotfiles
# Description: A simple wrapper around wttr.in that tells you the weather.
# Version: 1.1.0
# Author: James Pond
# Author URL: https://jamespond.co/
# License: European Union Public License 1.2 or later
# License URI: https://joinup.ec.europa.eu/collection/eupl/eupl-text-11-12
#

# Enable "bash strict mode".
# http://redsymbol.net/articles/unofficial-bash-strict-mode/
set -euo pipefail
IFS=$'\n\t'

# Call wttr.in to get the weather, but default to your IP address if no city is
# given as a parameter.
printf "\n"
curl \
  --tlsv1.2 \
  --proto =https \
  --compressed \
  --silent \
  https://wttr.in/"${1-$(curl -s -4 https://icanhazip.com/)}"?QTAF
printf "\n"

# All was well.
exit 0
