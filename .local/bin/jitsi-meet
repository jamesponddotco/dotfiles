#! /bin/bash
#
# Script Name: Jitsi Meet
# Script URL: https://git.sr.ht/~jamesponddotco/dotfiles
# Description: Wrapper to start Jitsi Meet inside a Firejail sandbox.
# Version: 0.1.0
# Author: James Pond
# Author URL: https://jamespond.co/
# License: European Union Public License 1.2 or later
# License URI: https://joinup.ec.europa.eu/collection/eupl/eupl-text-11-12
#

# Use bash's "unofficial strict mode".
set -o errexit -o nounset -o errtrace -o pipefail
IFS=$'\n\t'

# Force all output to use the simplest locale.
LC_ALL='C'
readonly LC_ALL

# Enable "bash strict mode".
# http://redsymbol.net/articles/unofficial-bash-strict-mode/
set -euo pipefail
IFS=$'\n\t'

# Open Jitsi Meet inside a Firejail sandbox with additional protections for
# AppImage applications.
# TODO: Write a Firejail profile for Jitsi Meet.
firejail \
  --name='Jitsi Meet' \
  --dns=127.0.5.3 \
  --apparmor \
  --appimage \
  --profile='/etc/firejail/electron.profile' \
  /usr/local/bin/jitsi-meet.AppImage

# All was well.
exit 0
