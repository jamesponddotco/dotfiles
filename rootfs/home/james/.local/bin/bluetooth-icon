#!/usr/bin/env bash

state="$(bluetoothctl show | awk '/PowerState/ {printf $2}')"
connected="$(bluetoothctl info | grep --count 'Paired')"
icon_path="${HOME}/.local/share/icons/Adwaita/"

if [[ "${state}" == "on" ]]; then
  icon='bluetooth-active-symbolic.svg'
else
  icon='bluetooth-disabled-symbolic.svg'
fi

if (( "${connected}" == 0 )); then
  printf '%s' "${icon_path}${icon}"
elif (( "${connected}" == 1 )); then
  printf '%s\n%s device connected' "${icon_path}${icon}" "${connected}"
else
  printf '%s\n%s devices connected' "${icon_path}${icon}" "${connected}"
fi

# All was well.
exit 0
