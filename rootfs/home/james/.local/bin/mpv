#! /bin/bash
#
# Script Name: MPV
# Script URL: https://git.sr.ht/~jamesponddotco/dotfiles
# Version: 2.1.0
# Author: James Pond
# Author URL: https://jamespond.co/
# License: European Union Public License 1.2 or later
# License URI: https://joinup.ec.europa.eu/collection/eupl/eupl-text-11-12
#

# Enable "bash strict mode".
# http://redsymbol.net/articles/unofficial-bash-strict-mode/
set -euo pipefail
IFS=$'\n\t'

# Run MPV quietly, and in fullscreen, allowing us to keep using our shell. Also
# add an option to delete the file while we watch, which I find useful.
if [[ "${1-}" == '--background' ]]; then
  /usr/bin/mpv --fs "$2" &> /dev/null &
elif [[ "${1-}" == '--and-delete' ]]; then
  /usr/bin/mpv --fs "$2" &> /dev/null &
  sleep 5
  rm -f "$2"
elif [[ "${1-}" == '--pip' ]]; then
  /usr/bin/mpv --ontop --no-border --on-all-workspaces --autofit=1280x720 \
    --geometry=98%:98% "$2" &> /dev/null &
else
  /usr/bin/mpv "$@"
fi

# All was well.
exit 0
